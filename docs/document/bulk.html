<html><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>Elastic4s</title><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="Elasticsearch Scala Client" /><meta name="author" content="Stephen Samuel" /><meta name="og:image" content="/elastic4s/img/poster.png" /><meta name="og:title" content="Elastic4s" /><meta name="og:site_name" content="Elastic4s" /><meta name="og:url" content="https://sksamuel.github.io/elastic4s" /><meta name="og:type" content="website" /><meta name="og:description" content="Elasticsearch Scala Client" /><meta name="twitter:image" content="/elastic4s/img/poster.png" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="" /><link rel="icon" type="image/png" href="/elastic4s/img/favicon.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/elastic4s/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/elastic4s/css/style.css" /><link rel="stylesheet" href="/elastic4s/css/palette.css" /><link rel="stylesheet" href="/elastic4s/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/elastic4s/" class="brand"><div class="brand-wrapper" style="background:url('/elastic4s/img/sidebar_brand.png') no-repeat"><span>Elastic4s</span></div></a></li> <li><a href="/elastic4s/docs/index.html" class="">Getting Started</a></li> <li><a href="/elastic4s/docs/document/index.html" class="">Document API</a> <ul class="sub_section"> <li><a href="/elastic4s/docs/document/index.html" class="">Index</a></li> <li><a href="/elastic4s/docs/document/get.html" class="">Get</a></li> <li><a href="/elastic4s/docs/document/multiget.html" class="">Multi Get</a></li> <li><a href="/elastic4s/docs/document/delete.html" class="">Delete</a></li> <li><a href="/elastic4s/docs/document/update.html" class="">Update</a></li> <li><a href="/elastic4s/docs/document/bulk.html" class="">Bulk</a></li></ul></li> <li><a href="/elastic4s/docs/search/search.html" class="">Search API</a> <ul class="sub_section"> <li><a href="/elastic4s/docs/search/multisearch.html" class="">Multi Search</a></li> <li><a href="/elastic4s/docs/search/explain.html" class="">Explain</a></li> <li><a href="/elastic4s/docs/search/suggestions.html" class="">Suggestions</a></li> <li><a href="/elastic4s/docs/search/validate.html" class="">Validate</a></li> <li><a href="/elastic4s/docs/search/count.html" class="">Count</a></li></ul></li> <li><a href="/elastic4s/docs/indices/createindex.html" class="">Indices API</a> <ul class="sub_section"> <li><a href="/elastic4s/docs/indices/createindex.html" class="">Create Index</a></li> <li><a href="/elastic4s/docs/indices/aliases.html" class="">Aliases</a></li> <li><a href="/elastic4s/docs/indices/optimize.html" class="">Optimize</a></li></ul></li> <li><a href="/elastic4s/docs/misc/analyzers.html" class="">Analyzers</a></li> <li><a href="/elastic4s/docs/misc/snapshot.html" class="">Snapshot</a></li> <li><a href="/elastic4s/docs/misc/javainterop.html" class="">Java Interop</a></li> <li><a href="/elastic4s/api/index.html" class="">Scaladoc</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="hidden-xs"><a href="https://github.com/sksamuel/elastic4s"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li class="hidden-xs"><a href="https://github.com/sksamuel/elastic4s"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('Elastic4s Elasticsearch Scala Client');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('Elastic4s Elasticsearch Scala Client');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="sksamuel" data-github-repo="elastic4s"><div class="content-wrapper"><section><h1 id="bulk-operations">Bulk Operations</h1>

<p>Elasticsearch allows us to index, delete and update in bulk mode for much faster throughput. When using the bulk API
you will save at the very least the latency of multiple requests, and usually Elasticsearch can optimize when it
knows it will be doing multiple requests in the same index/type.</p>

<p>Elastic4s supports bulk operations in an easy way. Index, update and delete operations use the same syntax as before
except they are now wrapped in a <code class="highlighter-rouge">bulk</code> keyword.</p>

<p>For example, bulk indexes:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">resp</span> <span class="k">=</span> <span class="n">client</span><span class="o">.</span><span class="n">execute</span> <span class="o">{</span>
  <span class="n">bulk</span> <span class="o">(</span>
    <span class="n">index</span> <span class="n">into</span> <span class="s">"bands/rock"</span> <span class="n">fields</span> <span class="s">"name"</span><span class="o">-&gt;</span><span class="s">"coldplay"</span><span class="o">,</span>
    <span class="n">index</span> <span class="n">into</span> <span class="s">"bands/rock"</span> <span class="n">fields</span> <span class="s">"name"</span><span class="o">-&gt;</span><span class="s">"kings of leon"</span><span class="o">,</span>
    <span class="n">index</span> <span class="n">into</span> <span class="s">"bands/pop"</span> <span class="n">fields</span> <span class="o">(</span><span class="s">"name"</span><span class="o">-&gt;</span><span class="s">"elton john"</span><span class="o">,</span> <span class="s">"best_album"</span><span class="o">-&gt;</span><span class="s">"goodbye yellow brick road"</span><span class="o">)</span>
  <span class="o">)</span>
<span class="o">}</span>
</code></pre>
</div>

<p>For those of you who are new to Scala, you will notice the bulk keyword uses parenthesis. This is required because
<code class="highlighter-rouge">bulk</code> accepts a Seq, where as <code class="highlighter-rouge">execute</code>, which can use parenthesis or braces accepts a single value (the bulk block).</p>

<p>An example of bulk delete operations:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">resp</span> <span class="k">=</span> <span class="n">client</span><span class="o">.</span><span class="n">execute</span> <span class="o">{</span>
  <span class="n">bulk</span> <span class="o">(</span>
    <span class="n">delete</span> <span class="n">id</span> <span class="mi">3</span> <span class="n">from</span> <span class="s">"places/cities"</span><span class="o">,</span>
    <span class="n">delete</span> <span class="n">id</span> <span class="mi">8</span> <span class="n">from</span> <span class="s">"places/cities"</span><span class="o">,</span>
    <span class="n">delete</span> <span class="n">id</span> <span class="mi">3</span> <span class="n">from</span> <span class="s">"music/bands"</span>
  <span class="o">)</span>
<span class="o">}</span>
</code></pre>
</div>

<p>The bulk API supports combining different type of operations:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">resp</span> <span class="k">=</span> <span class="n">client</span><span class="o">.</span><span class="n">execute</span> <span class="o">{</span>
  <span class="n">bulk</span> <span class="o">(</span>
    <span class="n">index</span> <span class="n">into</span> <span class="s">"bands/rock"</span> <span class="n">fields</span> <span class="s">"name"</span><span class="o">-&gt;</span><span class="s">"coldplay"</span><span class="o">,</span>
    <span class="n">index</span> <span class="n">into</span> <span class="s">"bands/rock"</span> <span class="n">fields</span> <span class="s">"name"</span><span class="o">-&gt;</span><span class="s">"kings of leon"</span><span class="o">,</span>
    <span class="n">delete</span> <span class="n">id</span> <span class="mi">3</span> <span class="n">from</span> <span class="s">"places/cities"</span><span class="o">,</span>
    <span class="n">delete</span> <span class="n">id</span> <span class="mi">8</span> <span class="n">from</span> <span class="s">"places/cities"</span>
  <span class="o">)</span>
<span class="o">}</span>
</code></pre>
</div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/elastic4s/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/elastic4s/js/main.js"></script></body></html>